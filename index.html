<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>蓝紫流星雨旋转相册</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, #0d0221 0%, #110e1b 100%);
      overflow: hidden;
      perspective: 1000px;
      font-family: sans-serif;
    }
	
	#loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 30px;
      z-index: 10000; 
    }

    .star-field {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: none;
    }

    .meteor {
      position: absolute;
      width: 2px;
      height: 120px;
      background: linear-gradient(to bottom, #8a2be2, rgba(0, 255, 255, 0));
      transform: rotate(45deg);
      opacity: 0.8;
      animation: meteor-fall linear infinite;
    }

    @keyframes meteor-fall {
      0% {
        opacity: 1;
        transform: translate(-10vw, -100vh) rotate(45deg);
      }
      100% {
        opacity: 0;
        transform: translate(100vw, 100vh) rotate(45deg);
      }
    }
	
/* 放大后的浪漫文字样式 */
.modal-text {
  opacity: 0;
  transition: opacity 1s ease-in-out;
  position: absolute;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255, 255, 255, 0.8); /* 半透明白色 */
  font-size: 1.5rem;
  text-align: center;
  max-width: 80%;
  font-family: "Courier New", monospace;
  letter-spacing: 2px;
  animation: blinkText 1.5s infinite;
  pointer-events: none; /* 避免文字挡住点击关闭 */
}

@keyframes blinkText {
  0%, 100% { opacity: 0.9; }
  50% { opacity: 0.5; }
}

    .carousel {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-style: preserve-3d;
      transform: translate(-50%, -50%);
      width: 280px;
      height: 180px;
      animation: spin 50s linear infinite;
      z-index: 2;
    }

    .carousel img {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 12px;
      border: 3px solid #fff;
      object-fit: contain;
      background-color: #000;
      box-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .carousel img:hover {
      transform: scale(1.2) rotateZ(3deg); /* 放大+轻微倾斜 */
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.9), 
                  0 0 60px rgba(138, 43, 226, 0.8);
      z-index: 5; /* 保证悬停图片在最上层 */
    }

    @keyframes spin {
      from { transform: translate(-50%, -50%) rotateY(0deg); }
      to   { transform: translate(-50%, -50%) rotateY(-360deg); }
    }

    .caption {
      position: fixed;
      bottom: 20px;
      width: 100%;
      text-align: center;
      color: #ffffff;
      font-size: 50px;
      font-weight: bold;
      z-index: 3;
      text-shadow: 0 0 8px rgba(138, 43, 226, 0.8);
    }

    #lightbox {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }

    #lightbox img {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 10px;
      box-shadow: 0 0 20px #fff;
    }

    #lightbox:active {
      display: none;
    }
	
	.stars-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 200vw;
      height: 200vh;
      z-index: 0;
      overflow: hidden;
    }

    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: gold;
      border-radius: 50%;
      opacity: 1.0;
      animation: twinkle 10s infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
	
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}
	
	/* 🎵 按钮 */
#musicBtn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 999;
  font-size: 16px;
  padding: 10px 18px;
  border-radius: 30px;
  background: rgba(138, 43, 226, 0.2);
  color: #fff;
  border: 1px solid #8a2be2;
  backdrop-filter: blur(4px);
  cursor: pointer;
  transition: background 0.3s ease;
  box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
  animation: glow 2.5s infinite ease-in-out;
}
#musicBtn:hover {
  background: rgba(138, 43, 226, 0.4);
}

/* 呼吸光晕效果 */
@keyframes glow {
  0%   { box-shadow: 0 0 5px rgba(138, 43, 226, 0.4), 0 0 10px rgba(138, 43, 226, 0.3); }
  50%  { box-shadow: 0 0 20px rgba(138, 43, 226, 0.9), 0 0 40px rgba(138, 43, 226, 0.6); }
  100% { box-shadow: 0 0 5px rgba(138, 43, 226, 0.4), 0 0 10px rgba(138, 43, 226, 0.3); }
}


.hint {
  position: fixed;
  bottom: 600px;   /* 在caption上方 */
  width: 100%;
  text-align: center;
  color: #ffd700;
  font-size: 20px;
  z-index: 3;
  animation: blink 1.5s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* 🌟 星星光晕层 */
.star-glow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0; /* 在云雾之上，相册之下 */
  pointer-events: none;
}

.star-glow span {
  position: absolute;
  width: 6px;
  height: 6px;
  background: radial-gradient(circle, rgba(255,255,200,0.9) 0%, transparent 70%);
  border-radius: 50%;
  animation: glowTwinkle infinite;
}

@keyframes glowTwinkle {
  0%, 100% { transform: scale(0.6); opacity: 0.3; }
  50% { transform: scale(1.3); opacity: 1; }
}

/* ✨ 粒子效果 */
.particle {
  position: fixed;
  font-size: 20px;
  pointer-events: none;
  animation: floatUp 1.5s linear forwards;
}

@keyframes floatUp {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) scale(0.5);
    opacity: 0;
  }
}

/* Emoji 拖尾 + 渐变发光 */
.emoji {
  position: absolute;
  pointer-events: none;
  font-size: 22px;
  animation: floatUp 1.5s ease-out forwards;
  opacity: 0.9;
  background: linear-gradient(45deg, #ff6ec4, #7873f5, #4ade80, #facc15);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 6px rgba(255,255,255,0.8));
}

@keyframes floatUp {
  from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  to   { transform: translate(-50%, -150%) scale(0.8); opacity: 0; }
}

/* 烟花点带渐变 */
.dot {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  opacity: 0.9;
  pointer-events: none;
  animation: explode 0.8s ease-out forwards;
  background: radial-gradient(circle, #fff, var(--color));
  filter: blur(1px) brightness(1.4);
}

@keyframes explode {
  from { transform: translate(0,0) scale(1); opacity: 1; }
  to   { transform: translate(var(--x), var(--y)) scale(0.3); opacity: 0; }
}

/* ✨ 粒子光点 */
.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: radial-gradient(circle, rgba(255,255,255,0.9), rgba(255,255,255,0));
  border-radius: 50%;
  pointer-events: none;
  animation: float 10s infinite ease-in-out;
}

@keyframes float {
  0%   { transform: translateY(0) scale(1); opacity: 0.7; }
  50%  { transform: translateY(-50px) scale(1.2); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 0.7; }
}

/* 🌠 新的流星效果 */
.shooting-star {
  position: absolute;
  width: 2px;
  height: 80px;
  background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0));
  transform: rotate(45deg);
  opacity: 0;
  animation: shooting 3s linear infinite;
}

@keyframes shooting {
  0%   { transform: translate(-10vw, -10vh) rotate(45deg); opacity: 1; }
  80%  { opacity: 1; }
  100% { transform: translate(100vw, 100vh) rotate(45deg); opacity: 0; }
}

/* 🌌 浪漫模式覆盖层 */
#romanticMode {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(6px);
  z-index: 9999;
  overflow: hidden;
}

/* 💖 飘落的元素 */
.romantic-item {
  position: absolute;
  font-size: 30px;
  animation: fall 6s linear infinite;
  opacity: 0.8;
}

@keyframes fall {
  0%   { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
}

/* 💡 按钮 */
#romanticBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10000;
  font-size: 18px;
  padding: 10px 16px;
  border: none;
  border-radius: 10px;
  background: pink;
  color: #fff;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(255,105,180,0.8);
}


  </style>
</head>
<body>

  <div id="loading">
      <p>✨ Loading...</p>
  </div>
  
  <!-- ✨ 光效和流星容器 -->
  <div id="effects"></div>

  <div class="star-glow" id="starGlow"></div> <!-- 🌟 星星光晕 -->

  <div class="stars-background" id="starsBackground"></div>

  <div class="star-field" id="starField"></div>

  <div class="carousel" id="carousel">
    <img src="./image/1.jpg"data-text="✨ "data-pos="bottom">
    <img src="./image/2.jpg"data-text="🌸 "data-pos="bottom">
    <img src="./image/3.jpg"data-text="🌸 "data-pos="bottom">
    <img src="./image/4.jpg"data-text="🌸 "data-pos="bottom">
    <img src="./image/5.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/6.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/7.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/9.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/10.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/11.jpg"data-text="🎉 "data-pos="bottom">
	<img src="./image/12.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/13.jpg"data-text="🌸 "data-pos="bottom">
	<img src="./image/14.jpg"data-text="🌸"data-pos="bottom">
  </div>

  <div class="caption" id="caption"></div>
  <!-- 📸 提示 -->
<div class="hint" id="photoHint">📸 点击照片可以放大哦！</div>

  <div id="lightbox">
    <img id="lightbox-img" src="">
    <div class="modal-text" id="modalText"></div>
  </div

  <!-- 🎵 音乐播放器 -->
  <audio id="bgMusic" autoplay loop muted playsinline>
    <source src="./music/LoveStory.mp3" type="audio/mpeg">
    您的浏览器不支持音频播放。
  </audio>

  <!-- 📢 手机端提示按钮 -->
  <div id="musicNotice" 
       style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
              background:rgba(0,0,0,0.7); color:#fff; padding:12px 20px; border-radius:10px;
              font-size:18px; text-align:center; z-index:1000; cursor:pointer;">
    🎵 点一下开启音乐
  </div>

  <!-- 🎵 播放按钮 -->
  <button id="musicBtn">🎵 暂停音乐</button>

  <script>
    // 控制粒子和星星数量
const MAX_STARS = 80;   // 可以自己调大小，越大星星越多
const MAX_PARTICLES = 50; // 控制粒子数量

let stars = [];
let particles = [];

    window.addEventListener("load", () => {
        const loading = document.getElementById("loading");
        setTimeout(() => {
          loading.style.display = "none";
        }, 2000); // 2秒后消失
      });
	  
    // 🌟 背景星星
  const starsBackground = document.getElementById('starsBackground');
  const totalStars = 250;
  for (let i = 0; i < totalStars; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + 'vw';
    star.style.top = Math.random() * 100 + 'vh';
    star.style.animationDuration = (Math.random() * 3 + 2).toFixed(2) + 's';
    star.style.opacity = Math.random();
    starsBackground.appendChild(star);
  }

  // 🌠 流星
  const meteorCount = 1000;
  const starField = document.getElementById('starField');
  for (let i = 0; i < meteorCount; i++) {
    const meteor = document.createElement('div');
    meteor.className = 'meteor';
    meteor.style.left = Math.random() * 100 + 'vw';
    meteor.style.animationDuration = (Math.random() * 1 + 0.6).toFixed(2) + 's';
    meteor.style.animationDelay = (Math.random() * 6).toFixed(2) + 's';
    starField.appendChild(meteor);
  }

  // 📸 相册
  const carousel = document.getElementById('carousel');
  const images = carousel.children;
  const angle = 360 / images.length;
  for (let i = 0; i < images.length; i++) {
    images[i].style.transform = `rotateY(${i * angle}deg) translateZ(500px)`;
  }

  // 🔠 打字
  const text = "Happy Birthday我的同桌，Shirley MOk Xue Ling ✨";
  const caption = document.getElementById('caption');
  let index = 0;
  function typeWriter() {
    if (index < text.length) {
      caption.innerHTML += text.charAt(index);
      index++;
      setTimeout(typeWriter, 100);
    }
  }
  typeWriter();

  // 🖼️ 点击放大图片 + 隐藏提示
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightbox-img');
const photoHint = document.getElementById('photoHint');

let typingInterval; // 保存打字定时器

Array.from(images).forEach(img => {
  img.onclick = function () {
    // 显示大图
    lightboxImg.src = this.src;
    lightbox.style.display = 'flex';
setTimeout(() => {
  lightbox.classList.add("show");
}, 50);


    // 获取 data-text 里的浪漫文字
    let text = this.dataset.text || "💖 这是属于我们的浪漫时刻";
    const lightboxText = document.getElementById("modalText");
    lightboxText.textContent = "";
    lightboxText.style.opacity = 1;

    // 打字机效果
    let i = 0;
    clearInterval(typingInterval);
    typingInterval = setInterval(() => {
      if (i < text.length) {
        lightboxText.textContent += text.charAt(i);
        i++;
      } else {
        clearInterval(typingInterval);
      }
    }, 100); // 打字速度，100ms 一个字

    // 用户点击一次后，隐藏提示
    if (photoHint) {
      photoHint.style.display = 'none';
    }
  };
});

// 点击背景关闭大图 + 清空文字
lightbox.addEventListener("click", () => {
  lightbox.style.display = "none";
  document.getElementById("modalText").textContent = "";
  clearInterval(typingInterval);
});


  // 🎵 自动播放 + 提示 + 控制 + 淡入淡出
  const music = document.getElementById("bgMusic");
  const btn = document.getElementById("musicBtn");
  const notice = document.getElementById("musicNotice");

  let fadeInterval = null;

  // 音乐淡入
  function fadeInMusic(targetVolume = 1, duration = 3000) {
    clearInterval(fadeInterval);
    music.volume = 0;
    const step = targetVolume / (duration / 100);
    fadeInterval = setInterval(() => {
      if (music.volume < targetVolume) {
        music.volume = Math.min(music.volume + step, targetVolume);
      } else {
        clearInterval(fadeInterval);
      }
    }, 100);
  }

  // 音乐淡出
  function fadeOutMusic(duration = 2000) {
    clearInterval(fadeInterval);
    const step = music.volume / (duration / 100);
    fadeInterval = setInterval(() => {
      if (music.volume > 0) {
        music.volume = Math.max(music.volume - step, 0);
      } else {
        clearInterval(fadeInterval);
        music.pause(); // 完全静音后暂停
      }
    }, 100);
  }

  // 页面加载后尝试自动播放
  window.addEventListener("DOMContentLoaded", () => {
    music.muted = false;
    music.play().then(() => {
      fadeInMusic(); // 自动播放时淡入
      btn.textContent = "🎵 暂停音乐";
    }).catch(err => {
      console.log("自动播放失败:", err);
      notice.style.display = "block";
    });
  });

  // 用户点击提示 → 播放音乐并淡入
  notice.addEventListener("click", () => {
    music.muted = false;
    music.play();
    fadeInMusic();
    notice.style.display = "none";
    btn.textContent = "🎵 暂停音乐";
  });

  // 播放/暂停按钮控制
  btn.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      fadeInMusic();
      btn.textContent = "🎵 暂停音乐";
    } else {
      fadeOutMusic(); // 点击暂停时淡出
      btn.textContent = "🎵 播放音乐";
    }
  });
  
  // 🌟 星星光晕效果
const starGlow = document.getElementById("starGlow");
for (let i = 0; i < 50; i++) {
  const glow = document.createElement("span");
  glow.style.left = Math.random() * 100 + "vw";
  glow.style.top = Math.random() * 100 + "vh";
  glow.style.animationDuration = (Math.random() * 5 + 3) + "s";
  starGlow.appendChild(glow);
}

// ✨ 点击屏幕生成粒子
document.addEventListener("click", (e) => {
  const particles = ["✨", "💫", "🌸", "🌟", "💖"];
  const particle = document.createElement("div");
  particle.className = "particle";
  particle.textContent = particles[Math.floor(Math.random() * particles.length)];
  particle.style.left = e.clientX + "px";
  particle.style.top = e.clientY + "px";
  document.body.appendChild(particle);

  // 动画结束后移除
  setTimeout(() => {
    particle.remove();
  }, 1500);
});

// 🌌 点击屏幕生成彩色烟花
document.addEventListener("click", (e) => {
  const colors = ["#ff4d4d", "#4dff4d", "#4d4dff", "#ffff4d", "#ff4dff", "#4dffff"];
  
  for (let i = 0; i < 20; i++) {
    const dot = document.createElement("div");
    dot.className = "dot";
    dot.style.background = colors[Math.floor(Math.random() * colors.length)];
    dot.style.left = e.clientX + "px";
    dot.style.top = e.clientY + "px";
    
    // 随机扩散方向
    const angle = Math.random() * 2 * Math.PI;
    const distance = Math.random() * 120 + 30; // 爆炸范围
    const x = Math.cos(angle) * distance + "px";
    const y = Math.sin(angle) * distance + "px";
    dot.style.setProperty("--x", x);
    dot.style.setProperty("--y", y);

    document.body.appendChild(dot);

    // 动画结束后移除
    setTimeout(() => dot.remove(), 1000);
  }
});

// 鼠标/手指移动时触发粒子效果
document.addEventListener("mousemove", spawnEffect);
document.addEventListener("touchmove", (e) => {
  const touch = e.touches[0];
  spawnEffect(touch);
});

function spawnEffect(e) {
  const chance = Math.random();

  if (chance < 0.7) {
    // 🎉 Emoji 拖尾
    const emojis = ["✨", "🌸", "💖", "🌟", "🎶", "🎊", "💫", "🎉", "🎀", "🎁", "🎗️"];
    const emoji = document.createElement("div");
    emoji.className = "emoji";
    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    emoji.style.left = e.clientX + "px";
    emoji.style.top = e.clientY + "px";
    document.body.appendChild(emoji);
    setTimeout(() => emoji.remove(), 1500);
  } else {
    // 🌌 烟花点拖尾
    const gradientColors = [
      "#ff4d4d", "#4dff4d", "#4d4dff", "#ffff4d", 
      "#ff4dff", "#4dffff", "#ff9800", "#00e676"
    ];
    for (let i = 0; i < 6; i++) {
      const dot = document.createElement("div");
      dot.className = "dot";
      let color = gradientColors[Math.floor(Math.random() * gradientColors.length)];
      dot.style.setProperty("--color", color);
      dot.style.left = e.clientX + "px";
      dot.style.top = e.clientY + "px";

      const angle = Math.random() * 2 * Math.PI;
      const distance = Math.random() * 50 + 10;
      dot.style.setProperty("--x", Math.cos(angle) * distance + "px");
      dot.style.setProperty("--y", Math.sin(angle) * distance + "px");

      document.body.appendChild(dot);
      setTimeout(() => dot.remove(), 800);
    }
  }
}

// ✨ 生成粒子光点
const effects = document.getElementById('effects');
for (let i = 0; i < 50; i++) {
  const particle = document.createElement('div');
  particle.className = 'particle';
  particle.style.left = Math.random() * 100 + 'vw';
  particle.style.top = Math.random() * 100 + 'vh';
  particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
  effects.appendChild(particle);
}

// 🌠 生成流星
for (let i = 0; i < 5; i++) {
  const star = document.createElement('div');
  star.className = 'shooting-star';
  star.style.left = Math.random() * 100 + 'vw';
  star.style.top = Math.random() * 100 + 'vh';
  star.style.animationDelay = (Math.random() * 10) + 's';
  effects.appendChild(star);
}

function createStar() {
  return {
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    radius: Math.random() * 2 + 1,
    speed: Math.random() * 0.5 + 0.2
  };
}

function createParticle(x, y) {
  return {
    x: x,
    y: y,
    dx: (Math.random() - 0.5) * 2,
    dy: (Math.random() - 0.5) * 2,
    life: 100
  };
}

const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");
document.body.appendChild(canvas);
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

function drawStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "white";
  stars.forEach(star => {
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
    ctx.fill();

    // 星星往下移动
    star.y += star.speed;
    if (star.y > canvas.height) {
      star.y = 0;
      star.x = Math.random() * canvas.width;
    }
  });
}

function updateParticles() {
  particles.forEach((p, i) => {
    ctx.fillStyle = "rgba(255,255,255,0.8)";
    ctx.beginPath();
    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
    ctx.fill();

    p.x += p.dx;
    p.y += p.dy;
    p.life--;

    if (p.life <= 0) {
      particles.splice(i, 1);
    }
  });
}

  </script>
</body>
</html>
